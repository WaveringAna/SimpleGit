<!-- templates/file.html -->
<!DOCTYPE html>
<html>
<head>
    <title>{{.Path}} - {{.Repo.Name}} - Git Server</title>
    <!--<link rel="stylesheet" href="/static/css/default.min.css">-->
    <link rel="stylesheet" href="/static/css/nord.min.css">
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

</head>
<body>
    {{template "navbar" .}}
    <!---
    <header>
        <div class="header-content">
            <h1>
                <a href="/">Git Server</a> / 
                <a href="/repo/{{.Repo.Name}}">{{.Repo.Name}}</a> /
                {{$repo := .Repo.Name}}
                {{$parts := split .Path "/"}}
                {{$path := ""}}
                {{range $i, $part := $parts}}
                    {{if lt $i (sub (len $parts) 1)}}
                        {{$path = printf "%s/%s" $path $part}}
                        <a href="/repo/{{$repo}}{{$path}}">{{$part}}</a> /
                    {{else}}
                        {{$part}}
                    {{end}}
                {{end}}
            </h1>
        </div>
    </header>-->

    <main>
        <div class="file-view">
            <div class="file-content">
                <div class="file-info">
                    <div class="file-stats">
                        <span>{{formatSize .Size}} bytes</span>
                    </div>
                    <div class="file-actions">
                        <button class="btn" onclick="copyCode()" title="Copy code">
                            <i class="fa-regular fa-copy"></i> Copy
                        </button>
                        <a href="/raw/{{.Repo.Name}}/{{.Path}}?branch={{.Branch}}" class="btn" title="View raw file">
                            <i class="fa-solid fa-file-code"></i> Raw
                        </a>
                    </div>
                </div>
                <!--
                <div class="code-container">
                    <table class="line-numbers-table">
                        <tbody>
                            {{range $index, $line := .Lines}}
                            <tr>
                                <td class="line-number" id="L{{add $index 1}}">{{add $index 1}}</td>
                                <td class="line-content"><code>{{$line}}</code></td>
                            </tr>
                            {{end}}
                        </tbody>
                    </table>
                </div>
                -->
                <div class="code-container" data-content="{{range $index, $line := .Lines}}{{$line}}&#10;{{end}}">
                    <table class="line-numbers-table">
                        <tbody>
                            {{range $index, $line := .Lines}}
                            <tr>
                                <td class="line-number" id="L{{add $index 1}}">{{add $index 1}}</td>
                                <td class="line-content"><pre><code>{{if eq $line ""}}&#x200b;{{else}}{{safeHTML $line}}{{end}}</code></pre></td>
                            </tr>
                            {{end}}
                        </tbody>
                    </table>
                </div>                
            </div>
            <div class="symbol-sidebar">
                <div class="symbol-header">
                    <h3>Symbols</h3>
                </div>
                <div class="symbol-list">
                    {{range .Symbols}}
                    <a href="#L{{.Line}}" class="symbol-item {{.Type}}">
                        <span class="symbol-type">{{.Icon}}</span>
                        <span class="symbol-name">{{.Name}}</span>
                    </a>
                    {{end}}
                </div>
            </div>
        </div>
    </main>
</body>
</html>